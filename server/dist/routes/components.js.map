{"version":3,"sources":["../../src/routes/components.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,SAAS,QAAQ,SAAR,EAAmB,MAAnB,EAAb;AAAA,IACE,mBAAmB,QAAQ,+BAAR,CADrB;AAAA,IAEE,aAAa,QAAQ,yBAAR,CAFf;;;AAKA,SAAS,cAAT,CAAyB,SAAzB,EAAoC;AAClC,MAAI,iBAAiB;AACnB,gBAAY,GADO;AAEnB,kBAAc;AAFK,GAArB;;AAKA,aAAW,KAAX,CAAiB,cAAc,SAA/B;;AAEA,SAAO,eAAe,SAAf,KAA6B,GAApC;AACD;;AAED,OAAO,GAAP,CAAW,GAAX,EAAgB,UAAC,GAAD,EAAM,GAAN,EAAc;AAC5B,mBACG,MADH,GAEG,IAFH,CAEQ;AAAA,WAAQ,IAAI,IAAJ,CAAS,IAAT,CAAR;AAAA,GAFR,EAGI;AAAA,WAAS,IAAI,UAAJ,CAAe,eAAe,MAAM,IAArB,CAAf,CAAT;AAAA,GAHJ;AAID,CALD;;AAOA,OAAO,GAAP,CAAW,gBAAX,EAA6B,UAAC,GAAD,EAAM,GAAN,EAAc;AACzC,mBACG,GADH,CACO,IAAI,MAAJ,CAAW,YADlB,EAEG,IAFH,CAEQ;AAAA,WAAQ,IAAI,IAAJ,CAAS,IAAT,CAAR;AAAA,GAFR,EAGQ;AAAA,WAAS,IAAI,UAAJ,CAAe,eAAe,MAAM,IAArB,CAAf,CAAT;AAAA,GAHR;AAID,CALD;;AAOA,OAAO,IAAP,CAAY,mCAAZ,EAAiD,UAAC,GAAD,EAAM,GAAN,EAAc;;AAE7D,mBACG,MADH,CACU,IAAI,MAAJ,CAAW,YADrB,EACmC,IAAI,MAAJ,CAAW,SAD9C,EAEG,IAFH,CAEQ;AAAA,WAAM,IAAI,UAAJ,CAAe,GAAf,CAAN;AAAA,GAFR,EAGQ;AAAA,WAAS,IAAI,UAAJ,CAAe,eAAe,MAAM,IAArB,CAAf,CAAT;AAAA,GAHR;AAID,CAND;;AAQA,OAAO,OAAP,GAAiB,MAAjB","file":"components.js","sourcesContent":["'use strict';\n\nlet router = require('express').Router(),\n  componentService = require('../services/component-service'),\n  logService = require('../services/log-service');\n\n// TODO - improve\nfunction getErrorStatus (errorCode) {\n  let errorStatusMap = {\n    'NOTFOUND': 404,\n    'BADREQUEST': 400\n  };\n\n  logService.debug('errorCode' + errorCode);\n\n  return errorStatusMap[errorCode] || 500;\n}\n\nrouter.get('/', (req, res) => {\n  componentService\n    .getAll()\n    .then(data => res.send(data),\n      error => res.sendStatus(getErrorStatus(error.code)));\n});\n\nrouter.get('/:componentKey', (req, res) => {\n  componentService\n    .get(req.params.componentKey)\n    .then(data => res.send(data),\n          error => res.sendStatus(getErrorStatus(error.code)));\n});\n\nrouter.post('/:componentKey/actions/:actionKey', (req, res) => {\n  // TODO - action config\n  componentService\n    .action(req.params.componentKey, req.params.actionKey)\n    .then(() => res.sendStatus(200),\n          error => res.sendStatus(getErrorStatus(error.code)));\n});\n\nmodule.exports = router;"]}