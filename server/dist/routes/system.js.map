{"version":3,"sources":["../../src/routes/system.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,SAAS,QAAQ,SAAR,EAAmB,MAAnB,EAAb;AAAA,IACE,gBAAgB,QAAQ,4BAAR,CADlB;AAAA,IAEE,aAAa,QAAQ,yBAAR,CAFf;;;AAKA,SAAS,cAAT,CAAyB,SAAzB,EAAoC;AAClC,MAAI,iBAAiB;AACnB,gBAAY,GADO;AAEnB,kBAAc;AAFK,GAArB;;AAKA,aAAW,KAAX,CAAiB,cAAc,SAA/B;;AAEA,SAAO,eAAe,SAAf,KAA6B,GAApC;AACD;;AAED,OAAO,IAAP,CAAY,WAAZ,EAAyB,UAAC,GAAD,EAAM,GAAN,EAAc;AACrC,gBACG,QADH,GAEG,IAFH,CAEQ;AAAA,WAAQ,IAAI,IAAJ,CAAS,IAAT,CAAR;AAAA,GAFR,EAGQ;AAAA,WAAS,IAAI,UAAJ,CAAe,eAAe,MAAM,IAArB,CAAf,CAAT;AAAA,GAHR;AAID,CALD;;AAOA,OAAO,GAAP,CAAW,SAAX,EAAsB,UAAC,GAAD,EAAM,GAAN,EAAc;AAClC,gBACG,SADH,GAEG,IAFH,CAEQ;AAAA,WAAQ,IAAI,IAAJ,CAAS,IAAT,CAAR;AAAA,GAFR,EAGQ;AAAA,WAAS,IAAI,UAAJ,CAAe,eAAe,MAAM,IAArB,CAAf,CAAT;AAAA,GAHR;AAID,CALD;;AAOA,OAAO,OAAP,GAAiB,MAAjB","file":"system.js","sourcesContent":["'use strict';\n\nlet router = require('express').Router(),\n  systemService = require('../services/system-service'),\n  logService = require('../services/log-service');\n\n// TODO - improve\nfunction getErrorStatus (errorCode) {\n  let errorStatusMap = {\n    'NOTFOUND': 404,\n    'BADREQUEST': 400\n  };\n\n  logService.debug('errorCode' + errorCode);\n\n  return errorStatusMap[errorCode] || 500;\n}\n\nrouter.post('/shutdown', (req, res) => {\n  systemService\n    .shutdown()\n    .then(data => res.send(data),\n          error => res.sendStatus(getErrorStatus(error.code)));\n});\n\nrouter.get('/status', (req, res) => {\n  systemService\n    .getStatus()\n    .then(data => res.send(data),\n          error => res.sendStatus(getErrorStatus(error.code)));\n});\n\nmodule.exports = router;"]}